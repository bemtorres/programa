<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción - Biblioteca Personal</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="intro-body">
    <div id="introCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-touch="true" data-bs-interval="false">
        <div class="carousel-indicators intro-indicators">
            <button type="button" data-bs-target="#introCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#introCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#introCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
            <button type="button" data-bs-target="#introCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
        </div>
        
        <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active">
                <div class="carousel-content">
                    <div class="intro-icon-wrapper">
                        <i class="bi bi-book intro-icon"></i>
                    </div>
                    <h2 class="intro-title">Bienvenido a tu Biblioteca Personal</h2>
                    <p class="intro-subtitle">Organiza y comparte tu mundo literario con otros amantes de la lectura</p>
                </div>
            </div>
            
            <!-- Slide 2 -->
            <div class="carousel-item">
                <div class="carousel-content">
                    <div class="intro-icon-wrapper">
                        <i class="bi bi-person-check intro-icon"></i>
                    </div>
                    <h2 class="intro-title">Comparte tus Preferencias</h2>
                    <p class="intro-subtitle">Descubre lectores con gustos similares y conecta con la comunidad</p>
                </div>
            </div>
            
            <!-- Slide 3 -->
            <div class="carousel-item">
                <div class="carousel-content">
                    <div class="intro-icon-wrapper">
                        <i class="bi bi-star intro-icon"></i>
                    </div>
                    <h2 class="intro-title">Evalúa y Reseña</h2>
                    <p class="intro-subtitle">Comparte tu opinión sobre tus lecturas favoritas con calificaciones y reseñas detalladas</p>
                </div>
            </div>
            
            <!-- Slide 4 -->
            <div class="carousel-item">
                <div class="carousel-content">
                    <div class="intro-icon-wrapper">
                        <i class="bi bi-qr-code intro-icon"></i>
                    </div>
                    <h2 class="intro-title">Comparte con QR</h2>
                    <p class="intro-subtitle">Comparte tu perfil literario fácilmente con una tarjeta de invitación digital</p>
                    <button id="startAppBtn" class="btn btn-light btn-lg mt-4 px-5 py-3 intro-btn">
                        <i class="bi bi-arrow-right me-2"></i>
                        Comenzar
                    </button>
                </div>
            </div>
        </div>
        
        <button class="carousel-control-prev intro-control" type="button" data-bs-target="#introCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next intro-control" type="button" data-bs-target="#introCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Siguiente</span>
        </button>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Verificar si está logueado
            const savedUser = localStorage.getItem('user');
            if (!savedUser) {
                window.location.href = 'index.html';
                return;
            }

            // Marcar que ya vio el intro
            localStorage.setItem('hasSeenIntro', 'true');

            // Inicializar carrusel con soporte de touch
            const carouselElement = document.querySelector('#introCarousel');
            const carousel = new bootstrap.Carousel(carouselElement, {
                interval: false,
                touch: true,
                wrap: false
            });

            // Botón comenzar
            const startBtn = document.getElementById('startAppBtn');
            if (startBtn) {
                startBtn.addEventListener('click', () => {
                    window.location.href = 'preferences.html';
                });
            }

            // Mejorar soporte de swipe con eventos táctiles
            let touchStartX = 0;
            let touchEndX = 0;
            const minSwipeDistance = 50;

            carouselElement.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });

            carouselElement.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });

            function handleSwipe() {
                const swipeDistance = touchEndX - touchStartX;
                
                if (Math.abs(swipeDistance) > minSwipeDistance) {
                    if (swipeDistance > 0) {
                        // Swipe derecho - ir al slide anterior
                        carousel.prev();
                    } else {
                        // Swipe izquierdo - ir al slide siguiente
                        carousel.next();
                    }
                }
            }

            // Agregar indicador visual de swipe en móviles
            if (window.innerWidth <= 768) {
                const swipeHint = document.createElement('div');
                swipeHint.className = 'swipe-hint';
                swipeHint.innerHTML = '<i class="bi bi-arrow-left-right"></i> Desliza para navegar';
                document.body.appendChild(swipeHint);
                
                setTimeout(() => {
                    swipeHint.style.opacity = '0';
                    setTimeout(() => swipeHint.remove(), 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>
